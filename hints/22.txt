════════════════════════════════════════
LESSON 22: The TEST Instruction
════════════════════════════════════════

TEST vs CMP

  cmpq A, B     Computes B - A, sets flags
  testq A, B    Computes B & A (AND), sets flags

Both discard the result. Only flags matter.


THE ZERO-CHECK IDIOM

  testq %rax, %rax

Computes RAX & RAX = RAX (AND with itself is identity).
Sets ZF = 1 if RAX is zero.

This is THE standard way to check if a register is zero.


WHY NOT CMP?

  cmpq $0, %rax     # 7+ bytes
  testq %rax, %rax  # 3 bytes

Same result, but test is shorter and often faster.


AFTER TEST

  testq %rdi, %rdi
  jz is_zero        # Jump if Zero (ZF = 1)
  jnz not_zero      # Jump if Not Zero (ZF = 0)

Note: jz and je are the same instruction!
      jnz and jne are the same instruction!


OTHER TEST USES

  testq $1, %rax    # Check if bit 0 is set (odd/even)
  testq $0x80, %al  # Check if high bit of byte is set


YOUR TASK

Check if %rdi is zero using test.
If zero, jump to 'is_zero'.

Two instructions:
  testq ???, ???
  jz ???
